<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Graph Databases and Visualization</title>
  <meta name="description" content="Recently, I tried several graph databases and visualization tools on large-scale graphs such as Neo4j, Graph-Tool etc..">
  <meta name="author" content="leopardpan">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Graph Databases and Visualization">
  <meta name="twitter:description" content="Recently, I tried several graph databases and visualization tools on large-scale graphs such as Neo4j, Graph-Tool etc..">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Graph Databases and Visualization">
  <meta property="og:description" content="Recently, I tried several graph databases and visualization tools on large-scale graphs such as Neo4j, Graph-Tool etc..">

  <link rel="icon" type="image/png" href="images/favicon.png" />
  <link href="/images/favicon.png" rel="shortcut icon" type="image/png">

  <link rel="stylesheet" href="/css/main.css">
  <!-- <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

  <link rel="canonical" href="http://C0ldstudy.github.io/2021/11/Graph_Databases_and_Visualization/">
  <link rel="alternate" type="application/rss+xml" title="Jason Xu" href="http://C0ldstudy.github.io/feed.xml">

  <!-- kramdown-math-katex latex sytax for markdown -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous"> -->
  <!-- <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script> -->


<!-- 站点统计 -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<!-- google 统计 -->
   
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-118980599-1', 'auto');
      ga('send', 'pageview');
  </script>
  

</head>

  <body>
    <span class="mobile btn-mobile-menu">
      <div class="nav_container">
         <nav class="nav-menu-item" style = "float:right">
            <i class="nav-menu-item">
              <a href="/#blog" title="" class="blog-button">
                Homepage
              </a>
            </i>
            
                <i class="nav-menu-item">
                  <a href="/timeline" title="timeline" class="btn-mobile-menu__icon">
                      Timeline
                  </a>
                </i>
            
                <i class="nav-menu-item">
                  <a href="/tags" title="tags" class="btn-mobile-menu__icon">
                      Tag
                  </a>
                </i>
            
                <i class="nav-menu-item">
                  <a href="/photography" title="photography" class="btn-mobile-menu__icon">
                      Photography
                  </a>
                </i>
            
                <i class="nav-menu-item">
                  <a href="/about" title="about" class="btn-mobile-menu__icon">
                      About me
                  </a>
                </i>
            
          </nav>
      </div>
    </span>




    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <!-- 头像效果-start -->
        <div class="ih-item circle effect right_to_left">
            <a href="/#blog" title="前往 Jason Xu 的主页" class="blog-button">
                <div class="img"><img src="/images/avatar.jpg" alt="img"></div>
                <div class="info">
                    <div class="info-back">
                        <h2>
                            
                                C0ldstudy
                            
                        </h2>
                        <p>
                           
                                Machine Learning / Security
                            
                        </p>
                    </div>
                </div>
            </a>
        </div>
        <!-- 头像效果-end -->
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Jason Xu" class="blog-button">Jason Xu</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">Personal Station</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">In the end, we only regret the chances we didn't take.</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        <p class="panel-cover__description">🇨🇳Shanghai -> 🇭🇰Hong Kong -> 🇺🇸Irvine</p>
        


        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">Homepage</a></li>
                
                  <li class="navigation__item"><a href="/timeline" title="timeline">Timeline</a></li>
                
                  <li class="navigation__item"><a href="/tags" title="tags">Tag</a></li>
                
                  <li class="navigation__item"><a href="/photography" title="photography">Photography</a></li>
                
                  <li class="navigation__item"><a href="/about" title="about">About me</a></li>
                
              </ul>
            </nav>
          </div>
        </div>


        </div>
      </div>
    </div>

    
    <div class="panel-cover--overlay cover-clear"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
>
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://vincenttam.github.io/javascripts/MathJaxLocal.js"
>
</script>



<article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title">Graph Databases and Visualization</h1>
    <div class="post-meta">
      <img src="/images/calendar.png" width="20px"/>
      <time datetime="2021-11-06 00:00:00 -0700" itemprop="datePublished" class="post-meta__date date">2021-11-06 | </time>
      <span id="busuanzi_container_page_pv" style='display:none'> Read: <span id="busuanzi_value_page_pv"></span> Times</span>

    </div>
  </header>

  <section class="post">

    <p>Recently, I tried several graph databases and visualization tools on large-scale graphs such as Neo4j, Graph-Tool etc..</p>

<p>In the blog, I will introduce some basic knowledge of them. At the same time, I record some issues and the corresponding solutions.</p>

<h1 id="neo4j">Neo4j</h1>

<h2 id="1-install-neo4j-on-ubuntu">1. Install Neo4j on Ubuntu</h2>

<p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-neo4j-on-ubuntu-20-04">Installation Tutorial</a></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">#</span> <span class="n">list</span> <span class="n">the</span> <span class="n">databases</span>
<span class="k">show</span> <span class="n">databses</span>
</code></pre></div></div>

<h2 id="2-usage">2. Usage</h2>

<p>Since I am using the community version, there are some actions such as creating a new database that are not able to take easily.</p>

<h4 id="21-how-to-createdelete-a-new-database">2.1 How to create/delete a new database:</h4>

<ul>
  <li>Create: <a href="https://stackoverflow.com/a/62564995/6546143">link</a>.</li>
  <li>Delete: <a href="https://stackoverflow.com/a/68773829/6546143">link</a>.</li>
  <li>Neo4j Server Config file: <code class="language-plaintext highlighter-rouge">/etc/neo4j/neo4j.conf</code>.</li>
  <li>Neo4j database path: <code class="language-plaintext highlighter-rouge">/var/lib/neo4j/</code></li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Step 1: Stop the server</span>
<span class="c"># Step 2:</span>
<span class="nb">cd</span> /var/lib/neo4j/
<span class="c"># Step 3:</span>
<span class="c"># rm -rf data/databases/lanl/* data/transactions/lanl/*</span>
<span class="nb">rm</span> <span class="nt">-rf</span> data/databases/&lt;database name&gt; data/transactions/&lt;database name&gt;
<span class="c"># Step 4: Restart the server</span>
</code></pre></div></div>

<h4 id="22-how-to-count-the-nodes-and-edges-number-in-the-whole-database">2.2 How to count the nodes and edges number in the whole database</h4>

<ul>
  <li>Solution: <a href="https://neo4j.com/developer/kb/fast-counts-using-the-count-store/">link</a></li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">#</span> <span class="k">count</span> <span class="n">node</span> <span class="n">number</span>
<span class="k">MATCH</span> <span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="k">RETURN</span> <span class="k">count</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">as</span> <span class="k">count</span>

<span class="o">#</span> <span class="k">count</span> <span class="n">edge</span> <span class="n">number</span>
<span class="k">MATCH</span> <span class="p">()</span><span class="o">-</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">()</span>
<span class="k">RETURN</span> <span class="k">count</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">as</span> <span class="k">count</span>
</code></pre></div></div>

<h4 id="23-install-apoc-for-neo4j">2.3 Install APOC for Neo4j</h4>

<ul>
  <li><a href="https://stackoverflow.com/a/56227465/6546143">Tutorial</a>, APOC downloading <a href="https://neo4j.com/labs/apoc/4.1/installation/">link</a>.</li>
</ul>

<h4 id="24-merge-repulicated-nodes">2.4 Merge repulicated nodes</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">MATCH</span> <span class="p">(</span><span class="n">n1</span><span class="p">:</span><span class="n">Node</span><span class="p">),(</span><span class="n">n2</span><span class="p">:</span><span class="n">Node</span><span class="p">)</span>
<span class="k">WHERE</span> <span class="n">n1</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">n2</span><span class="p">.</span><span class="n">name</span> <span class="k">and</span> <span class="n">id</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">id</span><span class="p">(</span><span class="n">n2</span><span class="p">)</span>
<span class="k">WITH</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span><span class="n">n2</span><span class="p">]</span> <span class="k">as</span> <span class="n">ns</span>
<span class="k">CALL</span> <span class="n">apoc</span><span class="p">.</span><span class="n">refactor</span><span class="p">.</span><span class="n">mergeNodes</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span> <span class="n">YIELD</span> <span class="n">node</span>
<span class="k">RETURN</span> <span class="n">node</span>
</code></pre></div></div>

<h4 id="25-insert-the-nodes-or-edges-if-not-existing">2.5 Insert the nodes or edges if not existing</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MERGE</span> <span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="n">Node</span> <span class="err">{</span><span class="n">name</span><span class="p">:</span><span class="mi">1146</span><span class="err">}</span><span class="p">)</span>
<span class="n">MERGE</span> <span class="p">(</span><span class="n">b</span><span class="p">:</span><span class="n">Node</span> <span class="err">{</span><span class="n">name</span><span class="p">:</span> <span class="mi">2464</span><span class="err">}</span><span class="p">)</span>
<span class="n">MERGE</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">r</span><span class="p">:</span> <span class="nb">Timestamp</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="26-show-all-the-nodes-and-edges-in-one-graph">2.6 Show all the nodes and edges in one graph</h4>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">Match</span> <span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="k">Return</span> <span class="n">n</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">m</span>
</code></pre></div></div>

<h4 id="27-display-more-nodes-and-edges">2.7 Display more nodes and edges</h4>

<p><code class="language-plaintext highlighter-rouge">:config initialNodeDisplay: 1000</code></p>

<h2 id="issues">Issues:</h2>

<ol>
  <li>When we try to login on Neo4j client, we receive the issue <code class="language-plaintext highlighter-rouge">ServiceUnavailable: WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket readyState is: 3</code>:
    <ol>
      <li>The solution is to connect to <code class="language-plaintext highlighter-rouge">localhost:7687/</code>. And then we can login on <code class="language-plaintext highlighter-rouge">localhost:7474/browser/</code> smoothly.</li>
    </ol>
  </li>
  <li>Trouble shooting <a href="https://community.neo4j.com/t/troubleshooting-connection-issues-to-neo4j/129">link</a>.
3.</li>
</ol>

<h1 id="graph-tool">Graph-Tool</h1>

<p><a href="https://graph-tool.skewed.de/">Graph-tool</a> is a python package that can analyses the graphs and visualize large-scale graphs.</p>

<p>It runs faster than Networkx because the core data structure and algorithms are implement in C++ instead of pure python.</p>

<p>There are some quick tutorials and examples in the <a href="https://graph-tool.skewed.de/static/doc/quickstart.html">link</a>.</p>

  </section>
<!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> -->
</article>

<section>
       <ul class="pager">
        
        <li class="previous">
            <a href="/2021/09/Reinstall_Ubuntu/" data-toggle="tooltip" data-placement="top" title="Reinstall Ubuntu on a dual-system machine">Last Blog：  <span>Reinstall Ubuntu on a dual-system machine</span>
            </a>
        </li>
        
        
    </ul>
</section>

<section class="post-comments">
<div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_config = function () {
      // Here is an example,
      this.page.url = "https://c0ldstudy.github.io/2021/11/Graph_Databases_and_Visualization/";
      this.page.identifier = "/2021/11/Graph_Databases_and_Visualization/";
    };

    // You should be able to get the following lines of code from your Disqus admin.
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = '//c0ldstudy-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
</section>


            <section class="footer">
    <footer>
        <div class = "footer_div">
          <div clas="recordings" style="display:flex;justify-content:space-around;">
          <div class="twitter_display">
            <div class='jekyll-twitter-plugin'><a class="twitter-timeline" data-width="300" data-tweet-limit="1" href="https://twitter.com/JiacenXu?ref_src=twsrc%5Etfw">Tweets by JiacenXu</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
          </div>
          <div class="github_chart">
            <img src="http://ghchart.rshah.org/409ba5/C0ldstudy" alt="C0ldstudy's Blue Github chart"/>
            <script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=400&t=n&d=PWaejm3rz2TG6HOtwcekX2kM9kPWz2aP6GYhuOVoNpA&co=2d78ad&cmo=3acc3a&cmn=ff5353&ct=ffffff'></script>
          </div>
        </div>
            <nav class="cover-navigation navigation--social">
            <ul class="navigation">
          
          <!-- Github -->
          <li class="navigation__item_social">
            <a href="https://github.com/c0ldstudy" title="@c0ldstudy 的 Github" target="_blank">
              <i class='fab fa-github fa-2x'></i>
              <span class="label">Github</span>
            </a>
          </li>
          
          
          <!-- Twitter -->
          <li class="navigation__item_social">
            <a href="https://twitter.com/JiacenXu" title="@JiacenXu" target="_blank">
              <i class='fab fa-twitter fa-2x'></i>
              <span class="label">Twitter</span>
            </a>
          </li>
          

          
          <!-- LinkedIn -->
          <li class="navigation__item_social">
            <a href="https://www.linkedin.com/in/jiacen-xu-021536105/" title="@jiacen-xu-021536105" target="_blank">
              <i class='fab fa-linkedin fa-2x'></i>
              <span class="label">LinkedIn</span>
            </a>
          </li>
          
          

          <!-- RSS -->
          <li class="navigation__item_social">
            <a href="/feed.xml" rel="author" title="RSS" target="_blank">
              <i class='fa fa-rss fa-2x'></i>
              <span class="label">RSS</span>
            </a>
          </li>

          
          <!-- Email -->
          <li class="navigation__item_social">
            <a href="mailto:coldstudyxu@gmail.com" title="Contact me">
              <i class='fa fa-envelope fa-2x'></i>
              <span class="label">Email</span>
            </a>
          </li>
          
          </ul>
        </nav>
        </div>

        <div class = "footer_div_counter">
           <p class="copyright text-muted">
            Copyright &copy; Jason Xu 2022 Theme by <a href="http://c0ldstudy.github.io/">C0ldstudy</a> |
            <iframe
                style="margin-left: 2px; margin-bottom:-5px;"
                frameborder="0" scrolling="0" width="91px" height="20px"
                src="https://ghbtns.com/github-btn.html?user=c0ldstudy&repo=c0ldstudy.github.io&type=star&count=true" >
            </iframe>
            </p>
        	<div align="right">
    			<!-- <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css"> -->
          <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

          <!-- 访问统计 -->
          <span id="busuanzi_container_site_uv" style='display:none'>
          <span id="busuanzi_value_site_uv"></span> People Visited!
          </span>
        </div>
        </div>
    </footer>
</section>

        </div>
    </div>

    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/js/main.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




  </body>

</html>
